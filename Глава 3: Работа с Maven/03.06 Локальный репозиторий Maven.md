## Локальный репозиторий Maven

Локальный репозиторий Maven — это ключевой компонент системы управления зависимостями в Maven, который позволяет разработчикам хранить все необходимые библиотеки и артефакты на своем компьютере. В этой главе мы рассмотрим, что такое локальный репозиторий, как он работает, где он находится и как его настраивать.

### 1. Что такое локальный репозиторий?

Локальный репозиторий — это директория на вашем компьютере, где Maven хранит все загруженные зависимости проекта, включая JAR-файлы, плагины и другие артефакты. Когда вы выполняете сборку проекта с помощью Maven, все необходимые зависимости автоматически загружаются в локальный репозиторий, что позволяет избежать повторного обращения к удалённым репозиториям при каждой сборке.

### 2. Где находится локальный репозиторий?

По умолчанию локальный репозиторий создаётся в директории `%USER_HOME%/.m2/repository`. Местоположение может варьироваться в зависимости от операционной системы:

- **Windows**: `C:\Users\<User_Name>\.m2\repository`
- **Linux**: `/home/<User_Name>/.m2/repository`
- **Mac**: `/Users/<User_Name>/.m2/repository`

Вы также можете использовать сокращённую запись для Linux и Mac: `~/.m2/repository`.

### 3. Настройка пользовательского локального репозитория

Если вам нужно изменить расположение локального репозитория, вы можете сделать это с помощью файла конфигурации `settings.xml`, который находится в директории установки Maven (обычно в папке `conf`). Для этого добавьте следующий код в файл `settings.xml`:

```xml
<settings xmlns="http://maven.apache.org/SETTINGS/1.0.0"
          xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
          xsi:schemaLocation="http://maven.apache.org/SETTINGS/1.0.0 http://maven.apache.org/xsd/settings-1.0.0.xsd">
    <localRepository>/path/to/your/local/repo</localRepository>
</settings>
```

Замените `/path/to/your/local/repo` на желаемый путь к вашему локальному репозиторию.

### 4. Передача местоположения локального репозитория через командную строку

Вы можете указать местоположение локального репозитория непосредственно через командную строку, используя свойство `maven.repo.local`. Это позволяет временно переопределить местоположение для конкретной сборки:

```bash
mvn -Dmaven.repo.local=/my/local/repository/path clean install
```

### 5. Как работает локальный репозиторий?

Когда вы запускаете команду сборки Maven, система сначала ищет необходимые зависимости в локальном репозитории:

1. **Поиск в локальном репозитории**: Если зависимость найдена, она используется из локального хранилища.
2. **Поиск в центральном репозитории**: Если зависимость не найдена, Maven автоматически ищет её в центральном репозитории (например, [Maven Central](http://repo1.maven.org/maven2/)).
3. **Удалённый репозиторий**: Если зависимость не найдена ни в локальном, ни в центральном репозитории, и вы настроили удалённый репозиторий, Maven будет искать её там.

### 6. Установка локальных JAR-файлов

Если вам нужно добавить собственные JAR-файлы в локальный репозиторий (например, библиотеки, которые не доступны в центральных или удалённых репозиториях), вы можете использовать плагин `maven-install-plugin`. Пример команды для установки JAR-файла:

```bash
mvn install:install-file -Dfile=path/to/your-library.jar -DgroupId=com.example -DartifactId=your-library -Dversion=1.0 -Dpackaging=jar
```

Эта команда установит указанный JAR-файл в ваш локальный репозиторий с заданными `groupId`, `artifactId` и `version`.

### 7. Заключение

Локальный репозиторий Maven является важной частью процесса управления зависимостями и сборки проектов. Он позволяет разработчикам эффективно управлять библиотеками и артефактами, минимизируя время загрузки и обеспечивая доступ к необходимым ресурсам без постоянного обращения к удалённым серверам.

Понимание работы с локальным репозиторием и его настройка помогут вам более эффективно организовать процесс разработки и избежать проблем с отсутствующими зависимостями во время сборки проекта. Используя возможности настройки и управления зависимостями, вы сможете значительно упростить свою работу с Maven и повысить производительность разработки приложений.

Citations:
[1] https://for-each.dev/lessons/b/-maven-local-repository
[2] https://proselyte.net/tutorials/maven/repositories/
[3] https://habr.com/ru/companies/lanit/articles/323008/
[4] https://qna.habr.com/q/209391
[5] https://ru.stackoverflow.com/questions/1520338/%D0%9A%D0%B0%D0%BA-%D0%BF%D0%BE%D0%B4%D0%BA%D0%BB%D1%8E%D1%87%D0%B8%D1%82%D1%8C-%D0%BA-%D0%BF%D1%80%D0%BE%D0%B5%D0%BA%D1%82%D1%83-%D0%BD%D0%B5%D1%81%D0%BA%D0%BE%D0%BB%D1%8C%D0%BA%D0%BE-%D1%80%D0%B5%D0%BF%D0%BE%D0%B7%D0%B8%D1%82%D0%BE%D1%80%D0%B8%D0%B5%D0%B2-%D1%87%D0%B5%D1%80%D0%B5%D0%B7-settings-xml
[6] https://dzen.ru/a/YpYry3_vvGMZWdQH
[7] https://sky.pro/media/dobavlenie-lokalnyh-jar-fajlov-v-maven-proekt/
[8] https://evmservice.ru/blog/apache-maven/

---
Answer from Perplexity: https://www.perplexity.ai/search/glava-iz-300-strok-chto-takoe-9WcTmuznQ.6R5kqMKVn1ng?utm_source=copy_output
